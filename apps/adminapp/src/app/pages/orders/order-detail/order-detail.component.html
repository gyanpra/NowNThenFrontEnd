<p-toast></p-toast>
<div class="admin-catogies" *ngIf="order">
    <p-card [header]="'View Order'" [subheader]="'Change the Order Status, if Required!'">
        <p-fieldset legend="Order Details" class="one" styleClass="p-mb-4" [toggleable]="true">

            <div class="formgrid grid">
                <div class="field col-4">
                    <h5>Order ID</h5>
                    <p>{{order.id}}</p>
                </div>
                <div class="field col-4">
                    <h5>Order Status</h5>
                    <p-dropdown [options]="orderStatuses" (onChange)="onStatusChange($event)" [style]="{'width':'90%'}"[(ngModel)]="selectedStatus" placeholder="Select Order Status" optionLabel="name" optionValue="id" [showClear]="true"></p-dropdown>
                    
                </div>
                <div class="field col-4">
                    <h5>Order Total Price</h5>
                    <p>{{order.totalPrice | currency: 'INR'}}</p>
                </div>
                <div class="field col-4">
                    <h5>Date Of Order</h5>
                    <p>{{order.dateOrdered | date: 'short'}}</p>
                </div>
            </div>
        </p-fieldset>
        <p-fieldset legend="Order Items" styleClass="p-mb-4" [toggleable]="true">
            
            <div class="formgrid grid mb-5">
                <div class="field col-2 text-xl">Product Name</div>
                <div class="field col-2 text-xl">Product Brand</div>
                <div class="field col-2 text-xl">Product Category</div>
                <div class="field col-2 text-xl">Product Price</div>
                <div class="field col-2 text-xl">Quantity</div>                
                <div class="field col-2 text-xl">Subtotal</div>
            </div>
            <div class="formgrid grid mb-3" *ngFor="let orderItem of order.orderItems">
                <div class="field col-2">{{orderItem.product?.name}}</div>
                <div class="field col-2">{{orderItem.product?.brand}}</div>
                <div class="field col-2">{{orderItem.product?.category?.name}}</div>
                <div class="field col-2">{{orderItem.product?.price | currency: 'INR'}}</div>
                <div class="field col-2">{{orderItem.quantity}}</div>                
                <div class="field col-2">{{orderItem.product?.price * orderItem.quantity | currency: 'INR'}}</div>
            </div>
            <div class="formgrid grid" style="color: red;">
                <div class="field col-2 offset-8 text-xl">Total Price</div>
                <div class="field col-2 text-xl">{{order.totalPrice | currency: 'INR'}}</div>

            </div>
        </p-fieldset>
        <p-fieldset legend="User Address" styleClass="p-mb-4" [toggleable]="true">
            <div class="formgrid grid">
                <div class="field col-4">
                    <h5>User Name</h5>
                    <p>{{order.user.name}}</p>
                </div>
                <div class="field col-4">
                    <h5>Delivery Address</h5>
                    <p>{{order.shippingAddress}}</p>
                </div>
                <div class="field col-4">
                    <h5>Delivery City</h5>
                    <p>{{order.city}}</p>
                </div>
                <div class="field col-4">
                    <h5>Delivery State</h5>
                    <p>{{order.state}}</p>
                </div>
                <div class="field col-4">
                    <h5>User contact</h5>
                    <p>{{order.phone}}</p>
                </div>
            </div>
        </p-fieldset>
    </p-card>
</div>